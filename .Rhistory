gregout = gregexpr("\'[0-9A-Z]{17}\'", doc)
thematch = mapply(getexpr,doc, gregout)
thematch
gregout = gregexpr("\'[0-9A-Z]{17}\'", doc[1:5])
thematch = mapply(getexpr,doc[1:5], gregout)
thematch
doc[1:5]
thematch[thematch!='']
grep("\'[0-9A-Z]{17}\'",doc)
doc[3365]
test =doc[3365]
gregout = gregexpr("\'[0-9A-Z]{17}\'", test)
thematch = mapply(getexpr,doc[1:5], gregout)
thematch
test
gregout
gregout = gregexpr("\'[0-9A-Z]{17}\'", test)
thematch = mapply(getexpr,test, gregout)
thematch
gregout = gregexpr("["\'][0-9A-Z]{17}["\']", test)
gregout = gregexpr('["\'][0-9A-Z]{17}["\']', test)
thematch = mapply(getexpr,test, gregout)
thematch
grep('vin *[:=] *["\'][0-9A-Z]{17}["\']',doc)
grep('[0-9A-Z]{17}',doc)
grep("[0-9A-Z]{17}",doc)
grep("\'[0-9A-Z]{17}\'",doc)
grep('vin *[:=] *["\'][0-9A-Z]{17}["\']',doc)
gregout = gregexpr('vin *[:=] *["\'][0-9A-Z]{17}["\']', test)
thematch = mapply(getexpr,test, gregout)
thematch
answer = gsub('vin *[:=] *["\']([0-9A-Z]{17})["\']', '\\1', thematch)
names(answer)=NULL
answer
names(answer)=NULL
answer
class(answer)
class(thematch)
class(gregout)
thematch = as.list(mapply(getexpr,test, gregout))
answer = gsub('vin *[:=] *["\']([0-9A-Z]{17})["\']', '\\1', thematch)
class(thematch)
class(answer)
names(answer)=NULL
answer
thematch
nextlink_pattern = 'href *= *["\']?([^"\'>]+)["\']?'
links = doc[grep(nextlink_pattern,doc)]
links
clear
gregoutlink = gregexpr(nextlink_pattern,links)
thematch = regmatches(links, nextlink_pattern)
thematch = regmatches(gregoutlink, nextlink_pattern)
thematch = as.list(mapply(getexpr,links, gregoutlink))
thematch
links = gsub('href *= *["\']?([^"\'>]+)["\']?','\\1',thematch)
names(vins)=NULL
names(links)=NULL
links
grep(nextlink_pattern,doc)
href = getHTMLLinks(url)
library(XML)
library(RHTMLForms)
library(rvest)
href = getHTMLLinks(url)
href
href = unique(getHTMLLinks(url))
href
href[grep("page|start",href)]
nextLinks = href[grep("page|start",href)]
install.packages("jsonlite")
library(jsonlite)
json <-
'[
{"Name" : "Mario", "Age" : 32, "Occupation" : "Plumber"},
{"Name" : "Peach", "Age" : 21, "Occupation" : "Princess"},
{},
{"Name" : "Bowser", "Occupation" : "Koopa"}
]'
mydf <- fromJSON(json)
mydf
substring(myjson, 1, 100)
mtcars
json <-
'{
{"Name" : "Mario", "Age" : 32, "Occupation" : "Plumber"},
{"Name" : "Peach", "Age" : 21, "Occupation" : "Princess"},
{},
{"Name" : "Bowser", "Occupation" : "Koopa"}
}'
mydf <- fromJSON(json)
json <-
'[
{"Name" : "Mario", "Age" : 32, "Occupation" : "Plumber"},
{"Name" : "Peach", "Age" : 21, "Occupation" : "Princess"},
{},
{"Name" : "Bowser", "Occupation" : "Koopa"}
]'
mydf <- fromJSON(json)
mydf
json <-
"[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724',dateAdded: '2015-06-19 00:00:00.0',vin: '1G1PC5SBXF7296543',stockNumber: 'Q1143',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/fe33c26872b4447da0e549f416e788ef.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Silver Ice Metallic',exteriorColorHex: 'c1c2c6',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'Contact Us'}},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000',dateAdded: '2015-02-07 00:00:00.0',vin: '1G1PC5SB9F7168973',stockNumber: 'Q0694',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/994b2869e88d446baa6f103c7c253137.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Tungsten Metallic',exteriorColorHex: '333230',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'$18,878'}}
]"
mydf <- fromJSON(json,flatten = TRUE)
json <-
'[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724',dateAdded: '2015-06-19 00:00:00.0',vin: '1G1PC5SBXF7296543',stockNumber: 'Q1143',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/fe33c26872b4447da0e549f416e788ef.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Silver Ice Metallic',exteriorColorHex: 'c1c2c6',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'Contact Us'}},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000',dateAdded: '2015-02-07 00:00:00.0',vin: '1G1PC5SB9F7168973',stockNumber: 'Q0694',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/994b2869e88d446baa6f103c7c253137.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Tungsten Metallic',exteriorColorHex: '333230',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'$18,878'}}
]'
json <-
'[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724',dateAdded: '2015-06-19 00:00:00.0',vin: '1G1PC5SBXF7296543',stockNumber: 'Q1143',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/fe33c26872b4447da0e549f416e788ef.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Silver Ice Metallic',exteriorColorHex: 'c1c2c6',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'Contact Us'}},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000',dateAdded: '2015-02-07 00:00:00.0',vin: '1G1PC5SB9F7168973',stockNumber: 'Q0694',status: 'New',vehicleYear: '2015',make: 'Chevrolet',model: 'Cruze',modelCode: '1PX69',trim: '1LT Auto',driveTrain: 'FWD',previewPhoto: 'http://cache.automotive.stringcontent.com/cotillion/vehicle_photos/994b2869e88d446baa6f103c7c253137.jpg',videoURL: '',odometer: '10',transmission: 'Automatic',transmissionType: 'Automatic',bodyStyle: 'Sedan',rawBodyStyle: '',doorsType: '',exteriorColor: 'Tungsten Metallic',exteriorColorHex: '333230',interiorColor: 'Jet Blk Premium',interiorColorHex: '',engine: '1.4L I-4',certificationProgramImage: '',certificationProgramName: '',rebate: '',cityMPG: '26',hwyMPG: '38',isSpecial: '0',certifications: {dealerCertification: {certificationPhoto: '',certificationLink: ''},thirdPartyCertification: {certificationPhoto: '',certificationLink: ''}},externalCommentsHeader: '',externalCommentsBody: '',externalCommentsFooter: '',pictureCount: '0',pictures: [],standardFeatures: [],optionPackages: [{optionPackageName: 'Technology Package',optionPackageItems: [{ optionPackageItem: 'USB Port Audio Interface Delete' },{ optionPackageItem: 'Radio: Chevrolet MyLink AM/FM Stereo w/CD Player' },{ optionPackageItem: 'Chevrolet MyLink' },{ optionPackageItem: 'Rear Vision Camera' }]},{optionPackageName: '1LT Driver Convenience Package',optionPackageItems: [{ optionPackageItem: 'Driver 6-Way Power Seat Adjuster (Fleet)' },{ optionPackageItem: 'Remote Vehicle Starter System' },{ optionPackageItem: 'Driver/Front Passenger Illuminated Vanity Mirrors' },{ optionPackageItem: 'Auto Dimming Inside Rearview Mirror' },{ optionPackageItem: 'Outside Heated Power-Adjustable Body-Color Mirrors' }]}],installedOptions: [{ installedOptionName: 'Engine: ECOTEC Turbo 1.4L DOHC VVT 4-Cylinder SMFI' },{ installedOptionName: 'Transmission: Electronic 6-Speed Automatic w/OD' },{ installedOptionName: 'CT/DE/ME/MD/MA/NJ/NY/OR/PA/RI/VT/WA Emissions Req' },{ installedOptionName: 'Cargo Net (LPO)' }],priceOne : {priceLabel:'MSRP',labelColor:'',strikeThrough:'true',price:'$22,210'},priceTwo : {priceLabel:'Internet Price',labelColor:'',price:'$18,878'}}
]'
json <-
'[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724'},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000'}
]'
json <-
"[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724'},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000'}
]"
mydf <- fromJSON(json,flatten = TRUE)
myjson <- toJSON(mtcars)
validate(myjson) #
myjson
json <-
"[
{vehicleID:'1123724',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/1123724'},
{vehicleID:'927000',locationID:'260',title:'New 2015 Chevrolet Cruze 1LT Auto',url: '/Vehicle_Details/desc/New_Chevrolet_Cruze__/vehicleID/927000'}
]"
validate(json) #
url = "http://claychevrolet.com/New_Inventory"
doc = readLines(url)
#vin pattern, ie "vin: '...'"
vin_pattern = 'vin *[:=] *["\'][0-9A-Z]{17}["\']'
test = doc[grep(vin_pattern,doc)]
gregout = gregexpr(vin_pattern, test)
thematch = as.list(mapply(getexpr,test, gregout))
vins = gsub('vin *[:=] *["\']([0-9A-Z]{17})["\']', '\\1', thematch)
names(vins)=NULL
vins
nextLinks
?mapply
mapply(rep, 1:4, 4:1)
mapply(rep, 1:4, 2)
sapply(rep, 1:4, 2)
mapply(rep, times = 1:4, MoreArgs = list(x = 42))
?intersect
(x <- c(sort(sample(1:20, 9)), NA))
(y <- c(sort(sample(3:23, 7)), NA))
union(x, y)
intersect(x, y)
setdiff(x, y)
setdiff(y, x)
setequal(x, y)
mapply(intersect,nextLinks,rep(url,length(nextLinks)))
intersect(url,nextLinks[1])
url
nextLinks[1]
install.packages("qualV")
library(qualV)
data(phyto)
bbobs    <- dpill(obs$t, obs$y)
bbobs
?dpill
n        <- tail(obs$t, n = 1) - obs$t[1] + 1
obsdpill <- ksmooth(obs$t, obs$y, kernel = "normal", bandwidth = bbobs,
n.points = n)
obss     <- data.frame(t = obsdpill$x, y = obsdpill$y)
obss     <- obss[match(sim$t, obss$t),]
obs_f1   <- f.slope(obss$t, obss$y)
sim_f1   <- f.slope(sim$t, sim$y)
lcs      <- LCS(obs_f1, sim_f1)
lcs
install.packages("Biostrings")
biocLite("BiocUpgrade")
source("http://bioconductor.org/biocLite.R")
biocLite("BiocUpgrade")
library("Biostrings")
biocLite("Biostrings")
library(Biostrings)
lcsubstr(url,nextLinks[1])
lcsubstr(BString(url),BString(nextLinks[1]))
?stringi
'a'%in%'abc'
str_extract(url,'.com/(.*)')
library(stringr)
str_extract(url,'.com/(.*)')
str_extract(url,'com/')
url
str_extract(url,'http')
paris_tweets = c(
"#Paris is chock-full of cultural and culinary attractions",
"Some time in #Paris along Canal St.-Martin famous by #Amelie",
"While you're in #Paris, stop at cafe: http://goo.gl/yaCbW",
"Paris, the city of light")
str_extract_all(paris_tweets, "#[a-zA-Z]{1,}")
x <- list(c(1,2,4),c(1,3,5),c(0,1,0),
c(1,3,6,5),c(3,4,4,4),c(0,1,0,1),
c(3,7),c(1,2),c(0,1))
data <- matrix(x,byrow=TRUE,nrow=3)
colnames(data) <- c("First", "Length", "Value")
rownames(data) <- c("Case1", "Case2", "Case3")
data
colnames(data) <- c("Dealer1", "Dealer2", "Dealer3")
rownames(data) <- c("VIN", "Make", "Model")
x <- list(c(11231231,223414134,412341234),c(13123,31413241,514234),c(1321312,14123414,0)143132413,
c('Honda','Honda','Honda'),c('Ford','Ford','Ford'),c('Toyota','Toyota','Toyota'),
c('EV1','EV1','EV1'),c('EV2','EV2','EV2'),c('EV3','EV3','EV3'))
x <- list(c(11231231,223414134,412341234),c(13123,31413241,514234),c(1321312,14123414,143132413),
c('Honda','Honda','Honda'),c('Ford','Ford','Ford'),c('Toyota','Toyota','Toyota'),
c('EV1','EV1','EV1'),c('EV2','EV2','EV2'),c('EV3','EV3','EV3'))
data <- matrix(x,byrow=TRUE,nrow=3)
colnames(data) <- c("Dealer1", "Dealer2", "Dealer3")
rownames(data) <- c("VIN", "Make", "Model")
data
x <- list(c(1,2,4),c(1,3,5),c(0,1,0),
c(1,3,6,5),c(3,4,4,4),c(0,1,0,1),
c(3,7),c(1,2),c(0,1))
data <- matrix(x,byrow=TRUE,nrow=3)
colnames(data) <- c("First", "Length", "Value")
rownames(data) <- c("Case1", "Case2", "Case3")
data
data.frame(Case=rep(rownames(data),lengths),
Sequence=sequence(lengths),
lapply(split(data,colnames(data)[col(data)]), unlist),
row.names=NULL)
lengths<-sapply(data[,1],length)
lengths
data[,1]
data.frame(Case=rep(rownames(data),lengths),
Sequence=sequence(lengths),
lapply(split(data,colnames(data)[col(data)]), unlist),
row.names=NULL)
col(data)
colnames(data)[col(data)])
colnames(data)[col(data)]
split(data,colnames(data)[col(data)])
lapply(split(data,colnames(data)[col(data)]), unlist),
lapply(split(data,colnames(data)[col(data)]), unlist)
colnames(data)[col(data)]
colnames(data)
[col(data)]
col(data)
row(data)
col(data)
colnames(data)[col(data)])
colnames(data)[col(data)]
colnames(data)[row(data)]
split(data,colnames(data)[row(data)]
)
lapply(split(data,colnames(data)[row(data)]), unlist)
lapply(split(data,colnames(data)[col(data)]), unlist)
data
lengths
x <- list(c(11231231,223414134,412341234),c(13123,31413241,514234),c(1321312,14123414,143132413),
c('Honda','Honda','Honda'),c('Ford','Ford','Ford'),c('Toyota','Toyota','Toyota'),
c('EV1','EV1','EV1'),c('EV2','EV2','EV2'),c('EV3','EV3','EV3'))
data <- matrix(x,byrow=TRUE,nrow=3)
colnames(data) <- c("Dealer1", "Dealer2", "Dealer3")
rownames(data) <- c("VIN", "Make", "Model")
data
x <- list(c(11231231,223414134,412341234),c(13123,31413241,514234,3424235),c(1321312,14123414,143132413,12313234,3123235),
c('Honda','Honda','Honda'),c('Ford','Ford','Ford','Ford'),c('Toyota','Toyota','Toyota','Toyota','Toyota'),
c('EV1','EV1','EV1'),c('EV2','EV2','EV2','EV2'),c('EV3','EV3','EV3','EV3','EV3'))
data <- matrix(x,byrow=TRUE,nrow=3)
colnames(data) <- c("Dealer1", "Dealer2", "Dealer3")
rownames(data) <- c("VIN", "Make", "Model")
data
data.frame(Dealership=rep(colnames(data),lengths),
lapply(split(data,rownames(data)[row(data)]), unlist),
row.names=NULL)
row(data)
rep(colnames(data),lengths)
lengths<-sapply(data[1,],length)
rep(colnames(data),lengths)
data.frame(Dealership=rep(colnames(data),lengths),
lapply(split(data,rownames(data)[row(data)]), unlist),
row.names=NULL)
setwd("~/Desktop/InternPI/Dealership-Scraping")
url = "http://www.milfordnissan.com/new-nissans/new-vehicle-inventory.html?reset=1"
require(RSelenium)
require(XML)
require(RCurl)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
url = "http://www.milfordnissan.com/new-nissans/new-vehicle-inventory.html?reset=1"
remDr$navigate(url)
webElem <- remDr$findElement(using = 'css selector', "a.scroll-for-more-bar")
webElem
webElem <- remDr$findElement(using = 'xpath', "//a[@class='scroll-for-more-bar']")
webElem
webElem <- remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
webElem
webElem <- remDr$findElement(using = 'xpath', "//div[@id='block-2']/div[2]/div[2]/div/a[@class='scroll-for-more-bar']")
webElem
remDr$navigate(url)
webElem <- remDr$findElement(using = 'xpath', "//div[@id='block-2']/div[2]/div[2]/div/a[@class='scroll-for-more-bar']")
webElem <- remDr$findElement(using = 'xpath', "//div[@id='block-2']/div[2]/div[2]/div/a[@class='scroll-for-more-bar']")
webElem
webElem <- remDr$findElement(using = 'xpath', "//*/a[@class='scroll-for-more-bar']")
webElem
webElem$getElementAttribute
webElem$getElementAttribute()
webElem$getElementText()
webElem <- remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
webElem$getElementText()
length(webElem)
remDr$buttondown()
remDr$buttondown(buttonId=0)
for(i in 1:10){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
for(i in 1:10){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
remDr$navigate(url)
remDr$navigate(url)
for(i in 1:10){
remDr$executeScript(paste("scroll(0,",i*100000,");"))
}
remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
remDr$navigate(url)
remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
webElem<-remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
webElem$getElementAttribute('href')
newurl = unlist(webElem$getElementAttribute('href'))
newurl
url = unlist(webElem$getElementAttribute('href'))
remDr$navigate(url)
remDr$navigate(url)
webElem<-remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
url = unlist(webElem$getElementAttribute('href'))
url = "http://www.milfordnissan.com/new-nissans/new-vehicle-inventory.html?reset=1"
remDr$navigate(url)
webElem<-remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
url = unlist(webElem$getElementAttribute('href'))
remDr$navigate(url)
newurl
remDr$navigate(url)
webElem<-remDr$findElement(using = 'xpath', "//div/a[@class='scroll-for-more-bar']")
url = "http://www.milfordnissan.com/new-nissans/new-vehicle-inventory.html?reset=7"
remDr$navigate(url)
newurl
remDr$close
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "chrome")
remDr$open(silent = TRUE)
cprof <- getChromeProfile("~/Library/Application Support/Google/Chrome", "Default")
remDr = remoteDriver(browserName = "chrome", extraCapabilities = cprof)
remDr$open(silent = TRUE)
cprof <- getChromeProfile("~/Library/Application Support/Google/Chrome", "Defsault")
remDr = remoteDriver(browserName = "chrome", extraCapabilities = cprof)
remDr$open(silent = TRUE)
cprof <- getChromeProfile(dataDir = "~/Library/Application Support/Google/Chrome","~/Library/Application Support/Google/Chrome/Default")
remDr = remoteDriver(browserName = "chrome", extraCapabilities = cprof)
remDr$open(silent = TRUE)
url = "http://www.milfordnissan.com/new-nissans/new-vehicle-inventory.html?reset=1"
RSelenium::startServer()
checkForServer()
cprof <- getChromeProfile(dataDir = "~/Library/Application Support/Google/Chrome","~/Library/Application Support/Google/Chrome/Default")
remDr = remoteDriver(browserName = "chrome", extraCapabilities = cprof)
remDr$open(silent = TRUE)
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$navigate(url)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$navigate(url)
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$navigate(url)
remDr$open(silent = TRUE)
remDr$navigate(url)
url = "http://www.primefordauburn.com/inventory/new-vehicles"
url = "http://www.primefordauburn.com/inventory/new-vehicles"
doc = htmlParse(url)
txt = xpathSApply(doc, "//script[@type='text/javascript']",xmlValue)
txt
txt = txt[grep("inventory_localization",txt)]
txt
require(RSelenium)
remDr$open(silent = TRUE)
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
require(RCurl)
remDr$open(silent = TRUE)
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
RSelenium::startServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
webElem<-remDr$findElement(using = 'xpath', "//div[@class='vehicleVIN']/span[2]")
webElem$getElementText()
sapply(webElem, function(x){x$webElem$getElementText()})
sapply(webElem, function(x){x$getElementText()})
sapply(webElem, function(x){x$getElementText()})
webElem$getElementText()
length(webElem)
sapply(webElem, function(x) x$getElementText())
sapply(webElem, function(x) x$getElementText())
webElem$getElementText()
remDr$navigate("http://www.google.com")
webElem3 <- remDr$findElement(using = 'xpath', value = '//input[@name = "q"]')
webElem1 <- remDr$findElement(using = 'name', value = 'q')
webElem1$sendKeysToElement(list('RSelenium was here'))
webElem1$clearElement()
webElem1$sendKeysToElement(list('R', key = 'enter'))
googLinkText <- remDr$findElements(value = "//h3[@class = 'r']")
linkHeading <- sapply(googLinkText, function(x) x$getElementText())
googLinkText
remDr$navigate(url)
webElem<-remDr$findElement(using = 'xpath', "//div[@class='vehicleVIN']")
length(webElem)
webElem$getElementText()
webElem<-remDr$findElement(using = 'xpath', "//span[@class='specValue']")
length(webElem)
webElem$getElementText()
webElem<-remDr$findElement(value="//span[@class='specValue']")
length(webElem)
webElem$getElementText()
webElem<-remDr$findElement(value="//div[@class='vehiclesVIN']")
remDr$navigate(url)
webElem<-remDr$findElement(value="//div[@class='vehiclesVIN']")
webElem<-remDr$findElement(value="//div[@class='vehiclesVIN']")
doc = remDr$getPageSource()
txt = xpathSApply(doc, "//div[@class='vehiclesVIN']/span[2]",xmlValue)
doc = htmlParse(doc)
class(doc)
doc = htmlParse(doc[[1]])
txt = xpathSApply(doc, "//div[@class='vehiclesVIN']/span[2]",xmlValue)
txt
doc
doc[1:200]
head(doc)
re = getNodeSet(doc, "//div[@class='vehiclesVIN']/span[2]")
re = getNodeSet(doc, "//div[@class='vehiclesVIN']")
re
length(re)
webElem<-remDr$findElement(value="//div[@class='vehicleVIN']")
length(webElem)
re = getNodeSet(doc, "//div[@class='vehicleVIN']")
txt = xpathSApply(doc, "//div[@class='vehicleVIN']/span[2]",xmlValue)
txt
getHTMLLinks(doc)
url = "www.primehondacars.com/inventory/new-vehicles"
remDr$navigate(url)
txt=remDr$getPageSource()
doc = htmlParse(txt, asText = TRUE)
baselink =paste0(url, "#0/10/DisplayPrice/a//")
baselink
RSelenium::startServer()
remDr$navigate(url)
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$navigate(url)
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$close
RSelenium::startServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$close
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$navigate(url)
remDr$open(silent = TRUE)
remDr$navigate(url)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
remDr$navigate(url)
remDr$close
remDr$navigate(url)
RSelenium::startServer()
checkForServer()
remDr = remoteDriver(browserName = "firefox")
remDr$open(silent = TRUE)
, log = FALSE, invisible = FALSE
remDr$navigate(url)
txt=remDr$getPageSource()
remDr$navigate(url)
url

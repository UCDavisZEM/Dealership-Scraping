allcars_df = do.call('rbind',allcar_ls)
head(allcars_df)
dim(allcars_df)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste0(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(4)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste0(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(5)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(6)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(7)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(8)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(10)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(15)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(url)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin = sub('.*([0-9A-Z]{17})$','\\1',url)
doc = htmlParse(url)
Sys.sleep(10)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
TrimNode = getNodeSet(doc,"//table[@class='cardata']/tr[5]/td[2]")
trim = xmlValue(TrimNode[[1]])
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
library(RHTMLForms)
url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
dform = decoder_forms$Form
attributes(dform)
dform$formAttributes
dform$url
decoder_submit = createFunction(dform)
library(RCurl)
vin_result = decoder_submit('3N63M0YN0FK709902')
new_page = htmlParse(vin_result)
new_page
doc = htmlParse(vin_result)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
year
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
make
ModelNode = getNodeSet(doc,"//table[@class='cardata']/tr[4]/td[2]")
model = xmlValue(ModelNode[[1]])
model
dform = decoder_forms$Form
dform
attributes(dform)
dform$names
dform['names']
decoder_forms
url = "http://www.decodethis.com/"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
vin_requests[1:20]
dform = decoder_forms$Form
attributes(dform)
dform
decoder_submit = createFunction(dform)
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
year
url = "http://www.decodethis.com/VIN-Decoded/vin"
decoder_forms = getHTMLFormDescription(url)
dform = decoder_forms$Form
decoder_submit = createFunction(dform)
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
year
doc
url = "http://www.decodethis.com/VIN-Decoded/vin/"
decoder_forms = getHTMLFormDescription(url)
dform = decoder_forms$Form
decoder_forms
decoder_submit = createFunction(dform)
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
YearNode = getNodeSet(doc,"//table[@class='cardata']/tr[2]/td[2]")
year = xmlValue(YearNode[[1]])
year
MakeNode = getNodeSet(doc,"//table[@class='cardata']/tr[3]/td[2]")
make = xmlValue(MakeNode[[1]])
make
url = "http://www.decodethis.com/VIN-Decoded/vin/"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
decoder_forms$Form
class(decoder_forms$Form)
decoder_submit
url = "www.google.com"
decoder_forms = getHTMLFormDescription(url)
vin_requests[1:20]
url = "http://www.vindecipher.com/veyance/"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
dform = decoder_forms$valvinForm
attributes(dform)
decoder_submit = createFunction(dform)
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
doc
vin_result = decoder_submit('1G1YB2D73F5109332')
vin_result
url = "http://www.google.com"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
dform = decoder_forms$f
attributes(dform)
vin_result = decoder_submit('R')
vin_result
doc = htmlParse(vin_result)
url = "http://www.google.com"
decoder_forms = getHTMLFormDescription(url)
dform = decoder_forms$f
decoder_submit = createFunction(dform)
vin_result = decoder_submit('R project')
doc = htmlParse(vin_result)
url = "http://www.decodethis.com/VIN-Decoded/vin/"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
url = "http://www.vindecipher.com/veyance/"
decoder_forms = getHTMLFormDescription(url)
decoder_forms
dform = decoder_forms$valvinForm
decoder_submit = createFunction(dform)
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
decoder_submit('1G1YB2D73F5109332')
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
doc
vin_result = decoder_submit('1G1YB2D73F5109332')
doc = htmlParse(vin_result)
doc = htmlParse(vin_result,asText=T)
install.packages("scrapeR")
library(scrapeR)
test = scrape(object=vin_result)
test = scrape(object="vin_result")[[1]]
vin_result = decoder_submit('1G1YB2D73F5109332')
is.null(vin_result)
vinT = getURL(vin_result,followinglocation=TRUE)
)
vinT = getURL(vin_result)
txt = getURLContent(vin_result, useragent = "R")
class(vin_result)
vin_result
vinT = getURL(vin_result)
doc = htmlParse(vin_result)
doc = htmlParse(vin_result,useInternalNodes = T)
txt = getForm(url,'valvinForm'=1G1YB2D73F5109332)
txt = getForm(url,'valvinForm'='1G1YB2D73F5109332')
txt
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data')
doc = htmlParse(vin_result)
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',style="post")
doc = htmlParse(vin_result)
txt
url = "http://www.vindecipher.com/veyance/"
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',style="post")
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="R"))
txt
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"))
txt
txt = postForm(url,vinNum=1G1YB2D73F5109332,submitBtn='Get VIN Data',style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"))
txt = postForm(url,vinNum=1G1YB2D73F5109332,submitBtn='Get VIN Data',style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"))
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt
h = getCurlHandle(cookiejar = "")
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',curl=h,style="post"
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',curl=h,style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt
url = "http://www.vindecipher.com/veyance/index.cfm?action=decode"
doc = htmlParse(url)
doc
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',curl=h,style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
verbose=TRUE,
followLocation=TRUE,
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt
txt = postForm(url,vinNum='1G1YB2D73F5109332',submitBtn='Get VIN Data',curl=h,style="post",
.opts = curlOptions(
referer="http://www.vindecipher.com/veyance/",
useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
))
txt
url = "http://www.vindecipher.com/veyance/index.cfm?action=decode"
decoder_forms = getHTMLFormDescription(url)
dform = decoder_forms$valvinForm
decoder_submit = createFunction(dform)
decoder_submit
vin_result = decoder_submit('1G1YB2D73F5109332')
vin_result
vin_result = decoder_submit('KL8CB6S94FC788982')
vin_result
as.string(312)
tostring(312)
toString(312)
doc = htmlParse(vin_result)
readHTMLTable
readHTMLTable(doc)
readHTMLTable(doc,header=False)
readHTMLTable(doc,header=F)
readHTMLTable(doc,header=T)
getNodeSet(doc,"//tr[@bgcolor][1:4]/td[2]/text()")
getNodeSet(doc,"//tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"/*/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"/*/head/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//table//tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//tr[@bgcolor]/td[2]/text()")
system.time(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"))
system.time(getNodeSet(doc,"//tr[@bgcolor]/td[2]/text()"))
system.time(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"))
system.time(getNodeSet(doc,"//tr[@bgcolor]/td[2]/text()"))
unlist(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"))
unlist(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")[[1:4]])
unlist(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"))[[1:4]]
list(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"))
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")[[1]]
sapply(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"),'[',1:4)
sapply(getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()"),'[[',1)
getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = infoNode[[1]]
Make = infoNode[[2]]
Year = infoNode[[3]]
Model = infoNode[[4]]
Manufacturer
Make
Year
Model
vin_requests = unname(sapply(df$VIN,toString))
vin_requests = unname(sapply(df$VIN,toString))
vin_requests[1:20]
vin_decoder<- function(vin_str)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin_result = decoder_submit(vin_str)
doc = htmlParse(vin_result)
Sys.sleep(2)
#/html/body/table[2]/tbody/tr[1]/td/table/tbody/tr[3]/td/table/tbody/tr[1]/td[2]
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = infoNode[[1]]
Make = infoNode[[2]]
Year = infoNode[[3]]
Model = infoNode[[4]]
print(paste(make,year,model,trim,vin))
return(c(make,year,model,trim,vin))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(vin_str)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin_result = decoder_submit(vin_str)
doc = htmlParse(vin_result)
Sys.sleep(2)
#/html/body/table[2]/tbody/tr[1]/td/table/tbody/tr[3]/td/table/tbody/tr[1]/td[2]
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = infoNode[[1]]
Make = infoNode[[2]]
Year = infoNode[[3]]
Model = infoNode[[4]]
print(paste(Manufacturer,Make,Year,Model,vin_request))
return(c(Manufacturer,Make,Year,Model,vin_request))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_decoder<- function(vin_str)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin_result = decoder_submit(vin_str)
doc = htmlParse(vin_result)
Sys.sleep(2)
#/html/body/table[2]/tbody/tr[1]/td/table/tbody/tr[3]/td/table/tbody/tr[1]/td[2]
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = infoNode[[1]]
Make = infoNode[[2]]
Year = infoNode[[3]]
Model = infoNode[[4]]
print(paste(Manufacturer,Make,Year,Model,vin_str))
return(c(Manufacturer,Make,Year,Model,vin_str))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
vin_requests[1:20]
vin_str = "2G1FA1E37F9111331"
vin_result = decoder_submit(vin_str)
doc = htmlParse(vin_result)
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = infoNode[[1]]
Make = infoNode[[2]]
Year = infoNode[[3]]
Model = infoNode[[4]]
Manufacturer
print(paste(Manufacturer,Make,Year,Model,vin_str))
class(Make)
Manufacturer = toString(infoNode[[1]])
Manufacturer = xmlValue(infoNode[[1]])
Manufacturer
vin_decoder<- function(vin_str)
{
#url = "http://www.decodethis.com/VIN-Decoded/vin/1FADP5CU0FL116000"
vin_result = decoder_submit(vin_str)
doc = htmlParse(vin_result)
Sys.sleep(2)
#/html/body/table[2]/tbody/tr[1]/td/table/tbody/tr[3]/td/table/tbody/tr[1]/td[2]
infoNode = getNodeSet(doc,"//table/tr[@bgcolor]/td[2]/text()")
Manufacturer = xmlValue(infoNode[[1]])
Make = xmlValue(infoNode[[2]])
Year = xmlValue(infoNode[[3]])
Model = xmlValue(infoNode[[4]])
print(paste(Manufacturer,Make,Year,Model,vin_str))
return(c(Manufacturer,Make,Year,Model,vin_str))
}
allcar_ls = lapply(vin_requests[1:20],vin_decoder)
